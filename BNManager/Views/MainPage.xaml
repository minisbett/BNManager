<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="BNManager.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:BNManager.ViewModels"
    x:Name="Page"
    mc:Ignorable="d">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid x:Name="TitleBar" Grid.Column="1" ColumnSpacing="8" Margin="16,8,8,8">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="auto" />
        <ColumnDefinition Width="auto" />
      </Grid.ColumnDefinitions>
      <Border CornerRadius="6" Width="32" Height="32">
        <Border.Background>
          <ImageBrush ImageSource="{StaticResource LogoCompact}" />
        </Border.Background>
      </Border>
      <TextBlock Grid.Column="1" Text="BN Manager" VerticalAlignment="Center" />
    </Grid>
    <NavigationView MenuItemsSource="{x:Bind ViewModel.Projects,Mode=OneWay}" SelectedItem="{x:Bind ViewModel.SelectedItem,Mode=TwoWay}" Grid.Row="1" CompactPaneLength="66" OpenPaneLength="256" IsBackButtonVisible="Collapsed" IsPaneOpen="False">
      <NavigationView.AutoSuggestBox>
        <AutoSuggestBox PlaceholderText="Search for projects..." QueryIcon="Find" />
      </NavigationView.AutoSuggestBox>
      <NavigationView.FooterMenuItems>
      </NavigationView.FooterMenuItems>
      <NavigationView.MenuItemTemplate>
        <DataTemplate x:DataType="vm:ProjectViewModel">
          <NavigationViewItem>
            <Grid ColumnSpacing="8">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="auto" />
              </Grid.ColumnDefinitions>
              <Border Width="42" Height="42" CornerRadius="12">
                <Border.Background>
                  <ImageBrush Stretch="UniformToFill" ImageSource="{x:Bind Cover}" />
                </Border.Background>
              </Border>
              <TextBlock Grid.Column="1" Text="{x:Bind Name,Mode=OneWay}" VerticalAlignment="Center" TextWrapping="Wrap" MaxWidth="166" />
            </Grid>
            <NavigationViewItem.ContextFlyout>
              <MenuFlyout>
                <MenuFlyoutItem Text="Open in Web" Icon="Globe" Command="{x:Bind OpenBeatmapSetInWebCommand}" />
                <MenuFlyoutSeparator />
                <MenuFlyoutItem Text="Edit" Icon="Edit" />
                <MenuFlyoutItem Text="Remove" Icon="Delete" />
              </MenuFlyout>
            </NavigationViewItem.ContextFlyout>
          </NavigationViewItem>
        </DataTemplate>
      </NavigationView.MenuItemTemplate>
      <Frame x:Name="ContentFrame" />
    </NavigationView>
  </Grid>
</Page>
